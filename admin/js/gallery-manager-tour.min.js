var VLS_GF=VLS_GF||{};
VLS_GF.TourModule=function(c){function m(){l=!1;d.remove();c("body").off("wheel.vls-gf mousewheel.vls-gf touchmove.vls-gf");c.post(ajaxurl,{action:"vls_gf_disable_tour"});VLS_GF.AlbumsPanelModule.loadGalleryTree();c(".left-panel .fixed-items .unsorted a").trigger("click")}function p(){if(!e)switch(f++,d.find(".vls-gf-tour-progress span").eq(f-1).addClass("done"),d.find(".vls-gf-tour-message").remove(),f){case 1:d.find(".vls-gf-tour-welcome-message").remove();a(".vls-gf-gallery-manager-container .left-panel","r",
210,"This is the Albums Panel. Here you can navigate your image collection and manage albums");b(".vls-gf-gallery-manager-container .left-panel",0,0,0,0);break;case 2:q();break;case 3:a("#vls-gf-btn-edit-gallery-tree","r",200,"Add, sort, move, rename or delete folders and albums by activating edit mode.");b("#vls-gf-btn-edit-gallery-tree",4,4,4,4);break;case 4:r();break;case 5:a("#vls-gf-btn-add-new-album","r",210,"Add a folder or an album by clicking these buttons");b("#vls-gf-btn-add-new-folder",
0,120,0,0);break;case 6:a("#vls-gf-gallery-tree","r",200,"To rename a folder or an album click these buttons.");b("#vls-gf-gallery-tree",0,-29,0,-195);break;case 7:a("#vls-gf-gallery-tree","r",200,"To delete a folder or an album click these buttons.");b("#vls-gf-gallery-tree",0,0,0,-214);break;case 8:t();break;case 9:a("#vls-gf-tab-panel","l",200,"There are three tabs available. Overview tab opens by default when you switch the active album.");b("#vls-gf-tab-panel",0,0,0,0);break;case 10:a(".vls-gf-right-panel .vls-gf-tab-view",
"l",200,"Overview tab shows all album's images. Here you can upload and delete images, move them between albums and edit image's details.",100);b(".vls-gf-right-panel .vls-gf-tab-view",0,0,0,0);break;case 11:a(".vls-gf-right-panel .vls-gf-image-panel li:eq(0)","r",200,'Click on a thumbnail to open the image details editing dialog. Drag thumbnail to the album in the Albums Panel to move it to another album or to the "Unsorted images" folder.');b(".vls-gf-right-panel .vls-gf-image-panel li:eq(0)",0,
0,0,0);break;case 12:a("#vls-gf-upload-image-button:parent","r",200,"Upload images to the active album");b("#vls-gf-upload-image-button:parent",0,0,0,0);break;case 13:a("#vls-gf-bulk-select-start-button:parent","l",200,"Activate bulk select mode to enable selecting multiple images and moving or deleting them at once.");b("#vls-gf-bulk-select-start-button:parent",0,0,0,0);break;case 14:a("#vls-gf-tab-panel li:eq(1)","l",200,"Click this tab to switch to the layout editor for the current album.");b("#vls-gf-tab-panel li:eq(1)",
0,0,0,0);break;case 15:u();break;case 16:a(".vls-gf-tab-view .vls-gf-tab-container-side","l",200,"Here you can set the layout options. The layout view is updated immediately on the change so you can see the result.");b(".vls-gf-tab-view .vls-gf-tab-container-side",6,6,6,6);break;case 17:a(".vls-gf-tab-view .vls-gf-tab-container-layout","l",200,"You can move every thumbnail to the desired position by dragging the thumbnail. If layout type 'Metro' is selected, you can also freely change the size of the thumbnail by dragging the resize helpers at the thumbnails' edges",
100);b(".vls-gf-tab-view .vls-gf-tab-container-layout",10,10,10,10);break;case 18:a("#vls-gf-tab-panel li:eq(2)","l",200,"To switch to the album details click this tab.");b("#vls-gf-tab-panel li:eq(2)",0,0,0,0);break;case 19:v();break;case 20:a(".vls-gf-right-panel .vls-gf-shortcode","l",200,"To insert an album to your post or page use the displayed shortcode."),b(".vls-gf-right-panel .vls-gf-shortcode",6,6,6,6),d.find("#vls-gf-tour-btn-close").remove(),d.find("#vls-gf-tour-btn-next").text("Done").off().on("click.vls-gf",
m),f=-1}}function w(){var k=c('<div class="vls-gf-tour-welcome-message">');k.append("<h1>Welcome to the Gallery Factory quick tour!</h1>");k.append('<p>This tour will guide you through the basic plugin features.<br>To proceed to the next step press "Next" button at the bottom of the screen.</p>');d.append(k);k.css({top:Math.floor(d.height()/2)-Math.floor(k.height()/2)-100+"px",left:Math.floor(d.width()/2)-Math.floor(k.width()/2)+"px"})}function q(){a(".vls-gf-gallery-manager-container .left-panel",
"r",200,"Expand the folder's contents by clicking on the folder.");e=!0;setTimeout(function(){c("#vls-gf-gallery-tree .folder.level-1:eq(0)").trigger("click");setTimeout(function(){c("#vls-gf-gallery-tree .folder.level-2:eq(1)").trigger("click");setTimeout(function(){b("#vls-gf-gallery-tree",56,0,0,0);e=!1},500)},500)},1500)}function r(){c("#vls-gf-btn-edit-gallery-tree").trigger("click");setTimeout(function(){a("#vls-gf-gallery-tree","r",200,"Sort folders and albums and move them between folders by simply dragging them to the desired position.");
b("#vls-gf-gallery-tree",0,0,0,0)},100)}function t(){e=!0;b("#vls-gf-gallery-tree",0,0,0,0);c("#vls-gf-btn-gallery-tree-cancel").trigger("click");setTimeout(function(){c("#vls-gf-gallery-tree .folder.level-1:eq(0)").trigger("click");setTimeout(function(){c("#vls-gf-gallery-tree .folder.level-2:eq(1)").trigger("click");setTimeout(function(){c("#vls-gf-gallery-tree .album.level-3:eq(0)").trigger("click");setTimeout(function(){a(".vls-gf-right-panel","l",200,"This is the Main Panel. It displays the currently activated album and provides access to all album-related features.",
100);b(".vls-gf-right-panel",0,0,0,0);e=!1},1E3)},600)},600)},600)}function u(){e=!0;c("#vls-gf-tab-panel li:eq(1) a").trigger("click");setTimeout(function(){a(".vls-gf-right-panel .vls-gf-tab-view","l",200,"Layout tab contains WYSIWYG layout editor fot the current album.",100);b(".vls-gf-right-panel .vls-gf-tab-view",0,0,0,0);e=!1},1500)}function v(){e=!0;c("#vls-gf-tab-panel li:eq(2) a").trigger("click");setTimeout(function(){a(".vls-gf-right-panel .vls-gf-tab-view","l",200,"Edit tab contains albums details edit form.",
100);b(".vls-gf-right-panel .vls-gf-tab-view",0,0,0,0);e=!1},1500)}function x(){for(var k=c('<div id="vls-gf-tour-backdrop"><div class="vls-gf-tour-focus"></div><div class="vls-gf-tour-controls"><div class="vls-gf-tour-progress"></div><button id="vls-gf-tour-btn-close">Skip the tour</button><button id="vls-gf-tour-btn-next">next</button></div></div>'),b=k.find(".vls-gf-tour-progress"),a=1;20>=a;a++)b.append('<span class="vls-gf-tour-step-'+a+'">');return k}function b(a,b,d,g,e){var h=c(a);a=h.offset().left;
var f=h.offset().top,l=h.outerWidth(),h=h.outerHeight();n.css({left:a-e+"px",top:f-b+"px",width:l+e+d+"px",height:h+b+g+"px"})}function a(a,b,e,g,f){a=c(a);g=c('<div class="vls-gf-tour-message"></div>').text(g);"l"===b?g.addClass("vls-gf-tour-message-left"):"r"===b&&g.addClass("vls-gf-tour-message-right");g.css("width",e+"px");d.append(g);f=0<f?a.offset().top+f:a.offset().top+Math.ceil(a.outerHeight()/2)-Math.ceil(g.outerHeight()/2);var h=0;"l"===b?h=a.offset().left-e-40:"r"===b&&(h=a.offset().left+
a.outerWidth()+40);g.css({top:f+"px",left:h+"px"})}var l=!1,f=0,y=c("#wpwrap"),d,n,e=!1;return{isActive:function(){return l},start:function(){l=!0;c("body").on("wheel.vls-gf mousewheel.vls-gf touchmove.vls-gf",function(a){return!1});d=x();n=d.find(".vls-gf-tour-focus");y.append(d);d.find("#vls-gf-tour-btn-close").on("click.vls-gf",m);d.find("#vls-gf-tour-btn-next").on("click.vls-gf",p);w()}}}(jQuery);
