(function(a,f,r,w){var l=function(){var b=r.body||r.documentElement,b=b.style;return""==b.WebkitTransition?"-webkit-":""==b.MozTransition?"-moz-":""==b.OTransition?"-o-":""==b.transition?"":!1},h=!1===l()?!1:!0,g=function(b,a,e){var d={},k=l();d[k+"transform"]="translateX("+a+")";d[k+"transition"]=k+"transform "+e+"s linear";b.css(d)},t="ontouchstart"in f,z=f.navigator.pointerEnabled||f.navigator.msPointerEnabled,y=function(b){if(t)return!0;if(!z||"undefined"===typeof b||"undefined"===typeof b.pointerType)return!1;
if("undefined"!==typeof b.MSPOINTER_TYPE_MOUSE){if(b.MSPOINTER_TYPE_MOUSE!=b.pointerType)return!0}else if("mouse"!=b.pointerType)return!0;return!1};a.fn.imageLightbox=function(b){b=a.extend({selector:'id="imagelightbox"',allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,preloadNext:!0,enableKeyboard:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1,bottomShift:68,container:a()},b);var c=a([]),e=a(),d=a(),k=0,p=0,n=0,u=!1,l=function(c){return"a"==
a(c).prop("tagName").toLowerCase()&&(new RegExp(".("+b.allowedTypes+")$","i")).test(a(c).attr("href"))},w=function(){if(!d.length)return!0;var c=.9*a(f).width(),e=.94*(a(f).height()-b.bottomShift),h=new Image;h.src=d.attr("src");h.onload=function(){k=h.width;p=h.height;if(k>c||p>e){var g=k/p>c/e?k/c:p/e;k/=g;p/=g}d.css({width:k+"px",height:p+"px",top:(a(f).height()-p-b.bottomShift)/2+"px",left:(a(f).width()-k)/2+"px"})}},q=function(m){if(u)return!1;m="undefined"===typeof m?!1:"left"==m?1:-1;if(d.length){if(!1!==
m&&(2>c.length||!0===b.quitOnEnd&&(-1===m&&0==c.index(e)||1===m&&c.index(e)==c.length-1)))return x(),!1;var f={opacity:0};h?g(d,100*m-n+"px",b.animationSpeed/1E3):f.left=parseInt(d.css("left"))+100*m+"px";d.animate(f,b.animationSpeed,function(){A()});n=0}u=!0;if(!1!==b.onLoadStart)b.onLoadStart();setTimeout(function(){d=a("<img "+b.selector+" />").attr("src",e.attr("href")).load(function(){d.appendTo("body");w();var v={opacity:1};d.css("opacity",0);if(h)g(d,-100*m+"px",0),setTimeout(function(){g(d,
"0px",b.animationSpeed/1E3)},50);else{var f=parseInt(d.css("left"));v.left=f+"px";d.css("left",f-100*m+"px")}d.animate(v,b.animationSpeed,function(){u=!1;if(!1!==b.onLoadEnd)b.onLoadEnd()});b.preloadNext&&(v=c.eq(c.index(e)+1),v.length||(v=c.eq(0)),a("<img />").attr("src",v.attr("href")).load())}).error(function(){if(!1!==b.onLoadEnd)b.onLoadEnd()});var f=0,l=0,t=0;d.on(z?"pointerup MSPointerUp":"click",function(a){a.preventDefault();if(b.quitOnImgClick)return x(),!1;if(y(a.originalEvent))return!0;
a=(a.pageX||a.originalEvent.pageX)-a.target.offsetLeft;e=c.eq(c.index(e)-(k/2>a?1:-1));e.length||(e=c.eq(k/2>a?c.length:0));q(k/2>a?"left":"right")}).on("touchstart pointerdown MSPointerDown",function(a){if(!y(a.originalEvent)||b.quitOnImgClick)return!0;h&&(t=parseInt(d.css("left")));f=a.originalEvent.pageX||a.originalEvent.touches[0].pageX}).on("touchmove pointermove MSPointerMove",function(a){if(!y(a.originalEvent)||b.quitOnImgClick)return!0;a.preventDefault();l=a.originalEvent.pageX||a.originalEvent.touches[0].pageX;
n=f-l;h?g(d,-n+"px",0):d.css("left",t-n+"px")}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(a){if(!y(a.originalEvent)||b.quitOnImgClick)return!0;50<Math.abs(n)?(e=c.eq(c.index(e)-(0>n?1:-1)),e.length||(e=c.eq(0>n?c.length:0)),q(0<n?"right":"left")):h?g(d,"0px",b.animationSpeed/1E3):d.animate({left:t+"px"},b.animationSpeed/2)})},b.animationSpeed+100)},A=function(){if(!d.length)return!1;d.remove();d=a()},x=function(){if(!d.length)return!1;d.animate({opacity:0},
b.animationSpeed,function(){A();u=!1;if(!1!==b.onEnd)b.onEnd()})};a(f).on("resize",w);if(b.quitOnDocClick)a(r).on(t?"touchend":"click",function(b){d.length&&!a(b.target).is(d)&&x()});if(b.enableKeyboard)a(r).on("keyup",function(a){if(!d.length)return!0;a.preventDefault();27==a.keyCode&&x();if(37==a.keyCode||39==a.keyCode)e=c.eq(c.index(e)-(37==a.keyCode?1:-1)),e.length||(e=c.eq(37==a.keyCode?c.length:0)),q(37==a.keyCode?"left":"right")});this.switchImageLightbox=function(a){var b=c.eq(a);if(b.length){var d=
c.index(e);e=b;q(a<d?"left":"right")}return this};this.switchNextImage=function(){e=c.eq(c.index(e)+1);e.length||(e=c.eq(0));q("right")};this.switchPrevImage=function(){e=c.eq(c.index(e)-1);e.length||(e=c.eq(c.length-1));q("left")};this.quitImageLightbox=function(){x();return this};this.updateTargets=function(d,f){f||(c.each(function(){a(this).off("click.imagelightbox")}),c=a([]));d.find(".vls-gf-item a").each(function(){l(this)&&(c=c.add(a(this)))});c.on("click.imagelightbox",function(c){if(!l(this))return!0;
c.preventDefault();if(u)return!1;u=!1;if(!1!==b.onStart)b.onStart();e=a(this);q()})};this.updateTargets(b.container,!1);return this}})(jQuery,window,document);
jQuery(function(a){var f=function(){a("#imagelightbox-loading").remove()},r=function(f){a('<a href="#" id="imagelightbox-close">Close</a>').appendTo("body").on("click touchend",function(){f.quitImageLightbox();return!1})},w=function(f){var g=a('<button type="button" class="imagelightbox-arrow imagelightbox-arrow-left"></button><button type="button" class="imagelightbox-arrow imagelightbox-arrow-right"></button>');g.appendTo("body");g.on("click touchend",function(g){g.preventDefault();a(this).hasClass("imagelightbox-arrow-left")?
f.switchPrevImage():f.switchNextImage();return!1})},l=function(){a("#imagelightbox-info").remove()};a(".vls-gf-album").each(function(){var h=a(this),g=h.imageLightbox({container:h.find(".vls-gf-page:first-child"),onStart:function(){a('<div id="imagelightbox-overlay"></div>').appendTo("body");r(g);w(g)},onEnd:function(){a(".imagelightbox-arrow").remove();l();a("#imagelightbox-close").remove();a("#imagelightbox-overlay").remove();f()},onLoadStart:function(){l();a('<div id="imagelightbox-loading"><div></div></div>').appendTo("body")},
onLoadEnd:function(){a(".imagelightbox-arrow").css("display","block");a("#imagelightbox");var g=a('<div id="imagelightbox-info"/>'),h=a('a[href="'+a("#imagelightbox").attr("src")+'"]'),l=h.find(".vls-gf-info-caption");l&&g.append('<h2 id="imagelightbox-info-caption">'+l.text()+"</h2>");(h=h.find(".vls-gf-info-description"))&&g.append('<div id="imagelightbox-info-description">'+h.text()+"</div>");g.appendTo("body");f()}});h.data("vlsGfLightbox",g)})});
